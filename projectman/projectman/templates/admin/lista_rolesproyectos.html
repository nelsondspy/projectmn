{% extends "__panel.html" %}

{% load tags %}

{% block titulo %} Control de acceso- Rol por proyecto y usuario  {% endblock %} 
{% block cabecera_pagina %}Asignar Roles  <small> Asigne roles a proyectos por usuario </small> {% endblock %}


{% block zonatrabajo %}

{% permiso_gral user.pk 'rol_asignar' as rol_asignar %}
{% if 'admin.rol_asignar' in perms or user.is_superuser %}
 <a class="btn btn-success" data-target="#form_modal"  data-toggle="modal" href="{% url 'rol_proyecto_crear' %}">
 <span class="glyphicon glyphicon-plus-sign"> </span> Nueva asignaci√≥n
 </a>
{% endif %}

<table class="table table-striped">

<tr>
    <th>El usuario </th>
	<th>tiene el rol</th>
	<th>en el proyecto</th>
	<th colspan="1">Acciones</th>
</tr>

{% permiso_gral user.pk 'usuario_modif' as usuario_modif %}

{% for asignacion in object_list %}
<tr>
	<td>{{ asignacion.usuario }}</td>
	<td>{{ asignacion.rol }}</td>
	<td>{{ asignacion.proyecto }}</td>

	{% if 'admin.usuario_modif' in perms or user.is_superuser %}

	<td><a href="{% url 'rol_proyecto_eliminar' asignacion.pk %}"  data-target="#form_modal" data-toggle="modal" ><span class="glyphicon glyphicon-remove"></span> Desasignar  </a></td>
	
	{% else %}

	<td><a href="" ><span class="glyphicon glyphicon-remove"></span> Desasignar  </a></td>

	{% endif %}
	
</tr>
{% endfor %}

</table>

{% endblock %}
